#
#
#
---
apiVersion: nnf.cray.hpe.com/v1alpha1
kind: NnfContainerProfile
metadata:
  name: axl-container-martymcf
  namespace: nnf-system
data:
  storages:
    - name: DW_JOB_storage
      optional: false
    - name: DW_PERSISTENT_storage
      optional: true
  mpiSpec:
    mpiReplicaSpecs:
      Launcher:
        template:
          spec:
            containers:
              - name: axl-container-martymcf
                image: docker.io/mcfadden8/axl:latest
                command: ["/bin/bash"]
                args: ["-c", "mpirun mpi_hello_world $(DW_JOB_storage) /p/lslide/martymcf"]
                volumeMounts:
                  - mountPath: /p/lslide
                    name: lslide
            volumes:
              - name: lslide
                persistentVolumeClaim:
                  claimName: kern-default-readwritemany-pvc
      Worker:
        template:
          spec:
            containers:
              - name: axl-container-martymcf
                securityContext:
                  allowPrivilegeEscalation: true
                  capabilities:
                    add:
                    - NET_BIND_SERVICE
                    - SYS_CHROOT
                    - AUDIT_WRITE
                image: docker.io/mcfadden8/axl:latest

